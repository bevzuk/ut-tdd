# Гимнастика объектов

*Перфекцинизм в дизайне достигается не тогда, когда нечего добавить, а тогда, когда нечего убрать.*  
-- Антуан де Сент Экзюпери

Гимнастика объектов заставляет нас думать о том, что можно убрать.
Это простой набор правил, которые, при уместном применении, будут сильно влиять на дизайн вашего кода. Сначала пробуйте просто следовать правилам, пока они не закрепятся.

## 10 правил гимнастики объектов
1. Только один уровень отступа в методе
2. Не используйте `else`
3. Оборачивайте все примитивы и строки в классы
4. Оборачивайте все коллекции в классы
5. Одна точка в строке
6. Не используйте аббревиатуры
7. Делайте все сущности маленькими
8. У класса не должно быть больше 2 полей
9. Никаких геттеров и сеттеров
10. У всех классов есть состояние

## Только один уровень отступа в методе
Зачем?
- Метод сфокусирован на чем-то одном
- Короткий метод легче понимать и переиспользовать

## Не используйте `else`
Зачем? 
- Поощряет структуру кода как основной поток выполнения и несколько исключений
- Подталкивает к использованию шаблонов проектирования (State, Null Object)

## Оборачивайте все примитивы и строки в классы
Как?
- Методы (кроме конструктора) не могут принимать примитивные типы (int, char, bool, string, datetime, ...) в качестве аргументов
- Методы не могут возвращать примитивные типы
- Для каждого примитивного типа, который вы хотите использовать, создайте класс, в котором будет развиваться поведение
- Можно использовать примитивы в приватных переменных

Зачем?
- У примитивных типов может быть очень разный смысл в разном контексте
- Компилятор найдет ошибки
- Класс будет притягивать к себе поведение

## Оборачивайте все коллекции в классы
Как?
- Методы (кроме конструктора) не могут принимать коллекции (List, Array, HashMap, Set, Dictionary ...) в качестве аргументов
- Создавайте класс, даже если это просто обертка над коллекцией. Класс будет домом для будущего поведения
- В классе, в котором есть коллекция, не должно быть других переменных класса

Зачем?
- Воспринимайте коллекции как примитивные типы
- Фильтры и поиск станет частью поведения ваших классов
- Вы можете изменить способ хранения, не повлияв на клиентов класса

## Одна точка в строке
Вместо `dog.Body.Tail.Wag()` сделайте метод, который выражает намерение, а не детали реализации, например `dog.ExpressHappiness()`.

Это правило не работает для LINQ и fluent интерфейсов.

Зачем?
- Скрыть реализацию; говорить объекту что ему нужно сделать вместо управления "кишками" объекта
  - Tell don't ask
- Уменьшать когнтитвную нагрузку (количество знаний, которые нужно держать в голове, чтобы управлять объектом)

## Не используйте аббревиатуры
Зачем?
- Аббревиатуры запутывают

## Делайте все сущности маленькими
Как?
- Не больше 10 классов в модуле
- Не больше 50 строк в классе
- Не больше 5 строк в методе
- Не больше 2 аргументов в методе

Зачем?
- Маленькие классы имеют одну ответственность
- Проще переиспользовать
- Проще понимать

## У класса не должно быть больше 2 полей
Чем больше полей у класса, тем меньше его сцепленность (Cohesion)
Обычно классы с несколькими полями — оркестраторы, а классы с одним полем — исполнители. Разделяйте эти ответственности.

## Никаких геттеров и сеттеров
Как?
- В классе не должно быть геттеров и сеттеров, особенно если они нужны только для тестов.
- Вместо получения данных, сравнивайте объекты, переопределив Equals()

Зачем?
- Реализует идею ООП как сеть объектов, обменивающихся друг с другом сообщениями (командами)
- Ключевое слово `class` может использоваться как для описания классов, так и структур данных, но они имеют принципиально разные ответственности

## У всех классов есть состояние
Как?
- Никаких статических и утилитных классов

Зачем?
- Даже если у метода нет состояния, у него есть принадлежность
- Старайтесь моделировать домен в виде объектов с четкой ответственностью и состоянием. Это поможет построить дизайн, который выражает поведение и скрывает состояние.

## Упражнение. Ставки
Задание
- Я, как игрок, могу купить фишки у казино, чтобы делать ставки
- Я, как игрок, могу сделать ставку в игре в кости, чтобы выиграть
- Я, как игрок, не могу поставить фишек больше, чем я купил
- Я, как игрок, могу сделать несколько ставок на разные числа, чтобы повысить вероятность выигрыша
- Я, как казино, принимаю только ставки, кратные 5
- Я, как игрок, могу поставить только на числа 1 - 6

Дебриф
- Понятность тестов: название, структура, данные, assert
- В реализации соблюдаются принципы гимнастики объектов
